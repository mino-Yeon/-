<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSS 선택자</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #0f0f1a; --bg2: #13132a; --bg3: #1a1a2e;
    --border: #2d2d50; --text: #e0e0f0; --muted: #777;
    --accent: #4cc9f0; --green: #90be6d; --orange: #f3722c; --yellow: #f9c74f;
    --hl: #4cc9f044; --hl-border: #4cc9f0;
  }
  body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }

  /* NAV */
  nav { display: flex; background: var(--bg3); border-bottom: 2px solid var(--border); position: sticky; top: 0; z-index: 100; overflow-x: auto; }
  nav::-webkit-scrollbar { height: 0; }
  nav button { flex-shrink: 0; padding: 13px 14px; background: none; border: none; border-bottom: 3px solid transparent; color: #888; font-size: 12px; font-weight: 600; cursor: pointer; transition: all .2s; white-space: nowrap; }
  nav button.active { color: var(--accent); border-bottom-color: var(--accent); }
  nav button:hover:not(.active) { background: #ffffff06; color: #ddd; }

  .section { display: none; max-width: 1040px; margin: 0 auto; padding: 32px 20px 60px; }
  .section.active { display: block; }
  h1 { font-size: 24px; font-weight: 700; margin-bottom: 6px; }
  .subtitle { color: var(--muted); font-size: 13px; line-height: 1.7; margin-bottom: 28px; }

  /* MAIN LAYOUT */
  .learn-layout { display: grid; grid-template-columns: 280px 1fr; gap: 20px; align-items: start; }
  @media(max-width: 720px) { .learn-layout { grid-template-columns: 1fr; } }

  /* SELECTOR LIST */
  .sel-panel { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; position: sticky; top: 60px; }
  .sel-panel-title { padding: 12px 16px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); border-bottom: 1px solid var(--border); background: var(--bg3); }
  .sel-item { padding: 11px 16px; cursor: pointer; border-bottom: 1px solid #1e1e38; transition: background .15s; display: flex; align-items: center; gap: 10px; }
  .sel-item:last-child { border-bottom: none; }
  .sel-item:hover { background: #1f1f3a; }
  .sel-item.active { background: #1a2a3a; border-left: 3px solid var(--accent); }
  .sel-code { font-family: 'Courier New', monospace; font-size: 13px; color: var(--accent); font-weight: 700; min-width: 130px; }
  .sel-name { font-size: 12px; color: var(--muted); }

  /* RIGHT PANEL */
  .right-panel { display: flex; flex-direction: column; gap: 16px; }

  /* DESCRIPTION */
  .desc-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
  .desc-card h2 { font-size: 16px; margin-bottom: 6px; display: flex; align-items: center; gap: 10px; }
  .desc-card h2 code { font-family: 'Courier New', monospace; color: var(--accent); font-size: 15px; background: #0a0a18; padding: 2px 8px; border-radius: 4px; }
  .desc-card p { font-size: 13px; color: #bbb; line-height: 1.7; margin-bottom: 10px; }
  .desc-card p:last-child { margin-bottom: 0; }
  .match-badge { display: inline-block; background: #1a3026; color: var(--green); border: 1px solid var(--green); border-radius: 20px; font-size: 11px; font-weight: 700; padding: 3px 10px; }

  /* HTML PREVIEW */
  .preview-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .preview-header { padding: 10px 16px; background: var(--bg3); border-bottom: 1px solid var(--border); font-size: 11px; color: var(--muted); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; display: flex; justify-content: space-between; align-items: center; }
  .preview-body { padding: 16px; font-family: 'Courier New', monospace; font-size: 13px; line-height: 2; }

  /* HTML ELEMENT HIGHLIGHT */
  .el { display: block; padding: 1px 4px; border-radius: 3px; transition: all .2s; white-space: pre; }
  .el.hl { background: var(--hl); outline: 1px solid var(--hl-border); color: #fff; border-radius: 4px; }
  .tag { color: #f8766d; } .attr { color: #ebcb8b; } .val { color: #a3be8c; } .cm { color: #555; }
  .ind1 { padding-left: 20px; } .ind2 { padding-left: 40px; } .ind3 { padding-left: 60px; }

  /* LIVE DEMO */
  .demo-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .demo-header { padding: 10px 16px; background: var(--bg3); border-bottom: 1px solid var(--border); font-size: 11px; color: var(--muted); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
  .demo-body { padding: 20px; }
  .demo-body * { transition: all .25s; }

  /* SPECIFICITY */
  .spec-layout { display: flex; flex-direction: column; gap: 20px; }
  .spec-builder { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
  .spec-builder h2 { font-size: 15px; margin-bottom: 14px; }
  .spec-items { display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
  .spec-row { display: flex; align-items: center; gap: 10px; background: var(--bg3); border-radius: 8px; padding: 10px 14px; border: 1px solid var(--border); cursor: pointer; transition: all .2s; }
  .spec-row:hover { border-color: var(--accent); }
  .spec-row.picked { border-color: var(--accent); background: #1a2a3a; }
  .spec-sel { font-family: monospace; font-size: 13px; color: var(--accent); min-width: 120px; }
  .spec-desc { font-size: 12px; color: var(--muted); flex: 1; }
  .spec-pts { font-family: monospace; font-size: 12px; font-weight: 700; padding: 2px 8px; border-radius: 4px; }
  .pts-id { background: #f3722c22; color: #f3722c; }
  .pts-cls { background: #4cc9f022; color: var(--accent); }
  .pts-tag { background: #90be6d22; color: var(--green); }

  .spec-score { background: var(--bg3); border-radius: 10px; padding: 20px; border: 1px solid var(--border); }
  .score-row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin-bottom: 14px; }
  .score-box { border-radius: 8px; padding: 12px 20px; text-align: center; min-width: 80px; }
  .score-box .num { font-size: 28px; font-weight: 700; font-family: monospace; }
  .score-box .lbl { font-size: 10px; color: var(--muted); margin-top: 2px; }
  .score-sep { font-size: 20px; color: var(--muted); }
  .score-total { font-size: 22px; font-weight: 700; font-family: monospace; color: var(--yellow); }

  .spec-combined { font-family: monospace; font-size: 14px; color: #ddd; background: #0a0a18; padding: 10px 14px; border-radius: 6px; border: 1px solid var(--border); word-break: break-all; }
  .spec-note { font-size: 12px; color: var(--muted); line-height: 1.7; margin-top: 12px; }
  .spec-note strong { color: #ddd; }

  .winner-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
  .winner-card h2 { font-size: 15px; margin-bottom: 14px; }
  .conflict-rows { display: flex; flex-direction: column; gap: 8px; }
  .conflict-row { display: flex; align-items: center; gap: 10px; padding: 10px 14px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg3); font-size: 13px; }
  .conflict-row.winner { border-color: var(--green); background: #1a3026; }
  .conflict-row .cr-sel { font-family: monospace; color: var(--accent); min-width: 140px; }
  .conflict-row .cr-prop { color: #bbb; flex: 1; font-family: monospace; font-size: 12px; }
  .conflict-row .cr-score { font-family: monospace; font-size: 12px; color: var(--muted); }
  .conflict-row .cr-win { font-size: 11px; color: var(--green); font-weight: 700; }
</style>
</head>
<body>

<nav>
  <button class="active" onclick="tab('basic',this)">① 기본 선택자</button>
  <button onclick="tab('combinator',this)">② 결합자</button>
  <button onclick="tab('attr',this)">③ 속성 선택자</button>
  <button onclick="tab('pseudo',this)">④ 가상 클래스</button>
  <button onclick="tab('element',this)">⑤ 가상 요소</button>
  <button onclick="tab('specificity',this)">⑥ Specificity</button>
</nav>

<!-- ══════════ ① 기본 선택자 ══════════ -->
<div id="tab-basic" class="section active">
  <h1>① 기본 선택자</h1>
  <p class="subtitle">가장 기본이 되는 선택자입니다. 선택자를 클릭하면 오른쪽 HTML에서 어떤 요소가 선택되는지 확인하세요.</p>
  <div class="learn-layout">
    <div class="sel-panel">
      <div class="sel-panel-title">선택자 목록</div>
      <div class="sel-item active" onclick="basicSel(this,'*')"><span class="sel-code">*</span><span class="sel-name">전체 선택자</span></div>
      <div class="sel-item" onclick="basicSel(this,'tag')"><span class="sel-code">p</span><span class="sel-name">태그 선택자</span></div>
      <div class="sel-item" onclick="basicSel(this,'class')"><span class="sel-code">.highlight</span><span class="sel-name">클래스 선택자</span></div>
      <div class="sel-item" onclick="basicSel(this,'id')"><span class="sel-code">#main-title</span><span class="sel-name">아이디 선택자</span></div>
      <div class="sel-item" onclick="basicSel(this,'multi')"><span class="sel-code">h2, p</span><span class="sel-name">그룹 선택자</span></div>
    </div>
    <div class="right-panel">
      <div class="desc-card" id="basic-desc">
        <h2><code>*</code> 전체 선택자</h2>
        <p>페이지의 <strong>모든 요소</strong>를 선택합니다. 주로 전역 초기화(reset)에 사용합니다.</p>
        <p><span class="match-badge" id="basic-match">✦ 7개 요소 선택됨</span></p>
      </div>
      <div class="preview-card">
        <div class="preview-header"><span>HTML 구조</span><span style="color:var(--accent);font-size:10px">← 선택된 요소가 하이라이트됩니다</span></div>
        <div class="preview-body" id="basic-html"></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ ② 결합자 ══════════ -->
<div id="tab-combinator" class="section">
  <h1>② 결합자 (Combinators)</h1>
  <p class="subtitle">두 선택자의 <strong>관계</strong>를 이용해 요소를 선택합니다. HTML 구조를 이해해야 제대로 쓸 수 있습니다.</p>
  <div class="learn-layout">
    <div class="sel-panel">
      <div class="sel-panel-title">선택자 목록</div>
      <div class="sel-item active" onclick="combSel(this,'desc')"><span class="sel-code">div p</span><span class="sel-name">자손 선택자</span></div>
      <div class="sel-item" onclick="combSel(this,'child')"><span class="sel-code">div > p</span><span class="sel-name">자식 선택자</span></div>
      <div class="sel-item" onclick="combSel(this,'adj')"><span class="sel-code">h2 + p</span><span class="sel-name">인접 형제</span></div>
      <div class="sel-item" onclick="combSel(this,'sib')"><span class="sel-code">h2 ~ p</span><span class="sel-name">일반 형제</span></div>
    </div>
    <div class="right-panel">
      <div class="desc-card" id="comb-desc">
        <h2><code>div p</code> 자손 선택자</h2>
        <p>div <strong>안에 있는 모든</strong> p를 선택합니다. 얼마나 깊이 중첩돼 있든 상관없습니다.</p>
        <p><span class="match-badge" id="comb-match">✦ 3개 요소 선택됨</span></p>
      </div>
      <div class="preview-card">
        <div class="preview-header"><span>HTML 구조</span><span style="color:var(--accent);font-size:10px">← 선택된 요소가 하이라이트됩니다</span></div>
        <div class="preview-body" id="comb-html"></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ ③ 속성 선택자 ══════════ -->
<div id="tab-attr" class="section">
  <h1>③ 속성 선택자</h1>
  <p class="subtitle">HTML 속성(attribute)을 기준으로 요소를 선택합니다. 폼 요소나 링크 스타일링에 자주 사용됩니다.</p>
  <div class="learn-layout">
    <div class="sel-panel">
      <div class="sel-panel-title">선택자 목록</div>
      <div class="sel-item active" onclick="attrSel(this,'exist')"><span class="sel-code">[required]</span><span class="sel-name">속성 존재</span></div>
      <div class="sel-item" onclick="attrSel(this,'eq')"><span class="sel-code">[type="text"]</span><span class="sel-name">값 일치</span></div>
      <div class="sel-item" onclick="attrSel(this,'start')"><span class="sel-code">[href^="https"]</span><span class="sel-name">값으로 시작</span></div>
    </div>
    <div class="right-panel">
      <div class="desc-card" id="attr-desc">
        <h2><code>[required]</code> 속성 존재</h2>
        <p><strong>required 속성이 있는</strong> 요소를 선택합니다. 값과 상관없이 속성만 있으면 됩니다.</p>
        <p><span class="match-badge" id="attr-match">✦ 2개 요소 선택됨</span></p>
      </div>
      <div class="preview-card">
        <div class="preview-header"><span>HTML 구조</span><span style="color:var(--accent);font-size:10px">← 선택된 요소가 하이라이트됩니다</span></div>
        <div class="preview-body" id="attr-html"></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ ④ 가상 클래스 ══════════ -->
<div id="tab-pseudo" class="section">
  <h1>④ 가상 클래스 (Pseudo-class)</h1>
  <p class="subtitle">요소의 <strong>상태</strong>나 <strong>위치</strong>를 기준으로 선택합니다. 실제로 아래 데모에서 직접 상호작용해보세요.</p>
  <div class="learn-layout">
    <div class="sel-panel">
      <div class="sel-panel-title">선택자 목록</div>
      <div class="sel-item active" onclick="pseudoSel(this,'hover')"><span class="sel-code">:hover</span><span class="sel-name">마우스 올림</span></div>
      <div class="sel-item" onclick="pseudoSel(this,'focus')"><span class="sel-code">:focus</span><span class="sel-name">포커스 상태</span></div>
      <div class="sel-item" onclick="pseudoSel(this,'active')"><span class="sel-code">:active</span><span class="sel-name">클릭 중</span></div>
      <div class="sel-item" onclick="pseudoSel(this,'first')"><span class="sel-code">:first-child</span><span class="sel-name">첫 번째 자식</span></div>
      <div class="sel-item" onclick="pseudoSel(this,'last')"><span class="sel-code">:last-child</span><span class="sel-name">마지막 자식</span></div>
      <div class="sel-item" onclick="pseudoSel(this,'nth')"><span class="sel-code">:nth-child(n)</span><span class="sel-name">n번째 자식</span></div>
    </div>
    <div class="right-panel">
      <div class="desc-card" id="pseudo-desc">
        <h2><code>:hover</code> 마우스 올림</h2>
        <p>마우스 커서가 요소 위에 올라갔을 때 적용됩니다. 버튼, 링크, 카드 등 인터랙션 피드백에 가장 많이 씁니다.</p>
      </div>
      <div class="demo-card">
        <div class="demo-header">라이브 데모 — 직접 상호작용해보세요</div>
        <div class="demo-body" id="pseudo-demo"></div>
      </div>
      <div class="preview-card">
        <div class="preview-header">CSS 코드</div>
        <div class="preview-body" id="pseudo-code"></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ ⑤ 가상 요소 ══════════ -->
<div id="tab-element" class="section">
  <h1>⑤ 가상 요소 (Pseudo-element)</h1>
  <p class="subtitle">HTML을 수정하지 않고 CSS만으로 <strong>가상의 요소를 생성</strong>합니다. <code>::before</code>와 <code>::after</code>가 핵심입니다.</p>
  <div class="learn-layout">
    <div class="sel-panel">
      <div class="sel-panel-title">선택자 목록</div>
      <div class="sel-item active" onclick="elemSel(this,'before')"><span class="sel-code">::before</span><span class="sel-name">요소 앞에 삽입</span></div>
      <div class="sel-item" onclick="elemSel(this,'after')"><span class="sel-code">::after</span><span class="sel-name">요소 뒤에 삽입</span></div>
    </div>
    <div class="right-panel">
      <div class="desc-card" id="elem-desc">
        <h2><code>::before</code> 요소 앞에 삽입</h2>
        <p>선택한 요소의 <strong>내부 맨 앞</strong>에 가상 요소를 만듭니다. 반드시 <code>content</code> 속성이 있어야 표시됩니다.</p>
        <p>HTML을 건드리지 않고 아이콘, 장식 등을 추가할 때 씁니다.</p>
      </div>
      <div class="demo-card">
        <div class="demo-header">라이브 데모</div>
        <div class="demo-body" id="elem-demo"></div>
      </div>
      <div class="preview-card">
        <div class="preview-header">CSS 코드</div>
        <div class="preview-body" id="elem-code"></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ ⑥ Specificity ══════════ -->
<div id="tab-specificity" class="section">
  <h1>⑥ Specificity (명시도)</h1>
  <p class="subtitle">같은 요소에 여러 선택자가 충돌할 때 <strong>어떤 스타일이 이길지</strong> 결정하는 점수 체계입니다.</p>
  <div class="spec-layout">
    <div class="spec-builder">
      <h2>선택자를 조합해서 점수를 확인해보세요</h2>
      <div class="spec-items">
        <div class="spec-row" onclick="toggleSpec(this,'id',100)">
          <span class="sel-code">#id</span>
          <span class="spec-desc">아이디 선택자</span>
          <span class="spec-pts pts-id">100점</span>
        </div>
        <div class="spec-row" onclick="toggleSpec(this,'cls',10)">
          <span class="sel-code">.class</span>
          <span class="spec-desc">클래스 선택자</span>
          <span class="spec-pts pts-cls">10점</span>
        </div>
        <div class="spec-row" onclick="toggleSpec(this,'hover',10)">
          <span class="sel-code">:hover</span>
          <span class="spec-desc">가상 클래스</span>
          <span class="spec-pts pts-cls">10점</span>
        </div>
        <div class="spec-row" onclick="toggleSpec(this,'tag',1)">
          <span class="sel-code">div</span>
          <span class="spec-desc">태그 선택자</span>
          <span class="spec-pts pts-tag">1점</span>
        </div>
        <div class="spec-row" onclick="toggleSpec(this,'p',1)">
          <span class="sel-code">p</span>
          <span class="spec-desc">태그 선택자</span>
          <span class="spec-pts pts-tag">1점</span>
        </div>
      </div>
      <div class="spec-score">
        <div class="score-row">
          <div class="score-box" style="background:#f3722c18;border:1px solid #f3722c44">
            <div class="num" id="sc-id" style="color:#f3722c">0</div>
            <div class="lbl">ID</div>
          </div>
          <div class="score-sep">,</div>
          <div class="score-box" style="background:#4cc9f018;border:1px solid #4cc9f044">
            <div class="num" id="sc-cls" style="color:var(--accent)">0</div>
            <div class="lbl">CLASS</div>
          </div>
          <div class="score-sep">,</div>
          <div class="score-box" style="background:#90be6d18;border:1px solid #90be6d44">
            <div class="num" id="sc-tag" style="color:var(--green)">0</div>
            <div class="lbl">TAG</div>
          </div>
          <div class="score-sep">=</div>
          <div><span class="score-total" id="sc-total">0점</span></div>
        </div>
        <div class="spec-combined" id="sc-combined">선택자를 클릭해서 조합해보세요</div>
        <div class="spec-note" id="sc-note"></div>
      </div>
    </div>

    <div class="winner-card">
      <h2>충돌 예시 — 어떤 스타일이 적용될까요?</h2>
      <div class="conflict-rows">
        <div class="conflict-row">
          <span class="cr-sel">p</span>
          <span class="cr-prop">color: red</span>
          <span class="cr-score">0,0,1</span>
        </div>
        <div class="conflict-row">
          <span class="cr-sel">.text</span>
          <span class="cr-prop">color: blue</span>
          <span class="cr-score">0,1,0</span>
        </div>
        <div class="conflict-row winner">
          <span class="cr-sel">#title</span>
          <span class="cr-prop">color: green</span>
          <span class="cr-score">1,0,0</span>
          <span class="cr-win">✅ 적용됨</span>
        </div>
      </div>
      <p style="font-size:12px;color:var(--muted);margin-top:14px;line-height:1.7">
        세 선택자가 같은 요소에 적용될 때, 점수가 가장 높은 <code style="color:var(--accent)">#title</code>(100점)이 이깁니다.<br>
        점수가 같으면 <strong style="color:#ddd">나중에 작성된 스타일</strong>이 적용됩니다.
      </p>
      <div style="margin-top:16px;padding:14px;background:var(--bg3);border-radius:8px;font-size:12px;color:var(--muted);line-height:1.9;border:1px solid var(--border)">
        <strong style="color:#ddd;display:block;margin-bottom:4px">⚠️ !important 주의</strong>
        <code style="color:var(--orange)">color: red !important</code>는 점수 계산을 무시하고 무조건 이깁니다.<br>
        하지만 남용하면 스타일 관리가 매우 어려워지므로 꼭 필요한 경우에만 사용하세요.
      </div>
    </div>
  </div>
</div>

<script>
// ══════ TABS ══════
function tab(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-' + id).classList.add('active');
  btn.classList.add('active');
}

// ══════ HELPERS ══════
const T = (tag,cls='',txt='') => `<span class="${cls}">${txt||tag}</span>`;
const tag = s => T('',`tag`,s);
const attr = s => T('',`attr`,s);
const val = s => T('',`val`,s);
const cm = s => T('',`cm`,s);

function el(indent, html, idx) {
  return `<span class="el ind${indent}" data-i="${idx}">${html}</span>`;
}

function applyHL(containerId, hlIdx) {
  document.querySelectorAll(`#${containerId} .el`).forEach(span => {
    const i = +span.dataset.i;
    span.classList.toggle('hl', hlIdx.includes(i));
  });
}

// ══════ ① BASIC ══════
const basicHTML = {
  '*': {
    desc: ['모든 요소', '페이지의 <strong>모든 요소</strong>를 선택합니다. 주로 전역 초기화(reset)에 사용합니다.', '7'],
    hl: [0,1,2,3,4,5,6]
  },
  tag: {
    desc: ['p — 태그 선택자', '태그 이름으로 선택합니다. 해당 태그를 <strong>모두</strong> 선택하므로 범위가 넓습니다.', '3'],
    hl: [2, 3, 5]
  },
  class: {
    desc: ['.highlight — 클래스 선택자', '<code>class="highlight"</code>가 있는 요소를 선택합니다. 태그 종류에 관계없이 선택 가능합니다.', '2'],
    hl: [3, 4]
  },
  id: {
    desc: ['#main-title — 아이디 선택자', '<code>id="main-title"</code>인 요소를 선택합니다. id는 페이지에서 <strong>유일</strong>해야 하므로 1개만 선택됩니다.', '1'],
    hl: [1]
  },
  multi: {
    desc: ['h2, p — 그룹 선택자', '쉼표로 구분해 여러 선택자를 동시에 적용합니다. 반복 작성을 줄일 때 씁니다.', '4'],
    hl: [1, 2, 3, 5]
  }
};

function renderBasicHTML() {
  return [
    el(0, tag('&lt;article&gt;'), 0),
    el(1, tag('&lt;h2 ') + attr('id') + '=' + val('"main-title"') + tag('&gt;') + 'CSS 선택자' + tag('&lt;/h2&gt;'), 1),
    el(1, tag('&lt;p&gt;') + '첫 번째 단락입니다.' + tag('&lt;/p&gt;'), 2),
    el(1, tag('&lt;p ') + attr('class') + '=' + val('"highlight"') + tag('&gt;') + '강조 단락' + tag('&lt;/p&gt;'), 3),
    el(1, tag('&lt;span ') + attr('class') + '=' + val('"highlight"') + tag('&gt;') + '강조 텍스트' + tag('&lt;/span&gt;'), 4),
    el(1, tag('&lt;p&gt;') + '세 번째 단락입니다.' + tag('&lt;/p&gt;'), 5),
    el(0, tag('&lt;/article&gt;'), 6),
  ].join('');
}

function basicSel(el, key) {
  document.querySelectorAll('#tab-basic .sel-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  const d = basicHTML[key];
  document.getElementById('basic-desc').innerHTML = `<h2><code>${d.desc[0]}</code></h2><p>${d.desc[1]}</p><p><span class="match-badge">✦ ${d.desc[2]}개 요소 선택됨</span></p>`;
  applyHL('basic-html', d.hl);
}
document.getElementById('basic-html').innerHTML = renderBasicHTML();
applyHL('basic-html', basicHTML['*'].hl);

// ══════ ② COMBINATOR ══════
const combData = {
  desc: {
    desc: ['div p — 자손 선택자', 'div <strong>안에 있는 모든</strong> p를 선택합니다. 얼마나 깊이 중첩돼 있든 상관없습니다.', '3'],
    hl: [2, 5, 7]
  },
  child: {
    desc: ['div > p — 자식 선택자', 'div의 <strong>바로 아래(직계 자식)</strong> p만 선택합니다. 더 깊이 중첩된 p는 선택되지 않습니다.', '2'],
    hl: [2, 7]
  },
  adj: {
    desc: ['h2 + p — 인접 형제 선택자', 'h2 바로 다음에 오는 <strong>첫 번째 형제</strong> p만 선택합니다. h2가 두 개이므로 각각의 바로 다음 p가 선택됩니다.', '2'],
    hl: [2, 5]
  },
  sib: {
    desc: ['h2 ~ p — 일반 형제 선택자', 'h2 이후에 오는 <strong>모든 형제</strong> p를 선택합니다. 각 h2를 기준으로 같은 부모 안의 p가 모두 선택됩니다.', '3'],
    hl: [2, 5, 7]
  }
};

function renderCombHTML() {
  return [
    el(0, tag('&lt;div&gt;'), 0),
    el(1, tag('&lt;h2&gt;') + '제목' + tag('&lt;/h2&gt;'), 1),
    el(1, tag('&lt;p&gt;') + 'div의 직계 자식 p' + tag('&lt;/p&gt;'), 2),
    el(1, tag('&lt;section&gt;'), 3),
    el(2, tag('&lt;h2&gt;') + '섹션 제목' + tag('&lt;/h2&gt;'), 4),
    el(2, tag('&lt;p&gt;') + 'section 안의 p (div의 자손)' + tag('&lt;/p&gt;'), 5),
    el(1, tag('&lt;/section&gt;'), 6),
    el(1, tag('&lt;p&gt;') + '두 번째 직계 자식 p' + tag('&lt;/p&gt;'), 7),
    el(0, tag('&lt;/div&gt;'), 8),
  ].join('');
}

function combSel(el, key) {
  document.querySelectorAll('#tab-combinator .sel-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  const d = combData[key];
  document.getElementById('comb-desc').innerHTML = `<h2><code>${d.desc[0]}</code></h2><p>${d.desc[1]}</p><p><span class="match-badge">✦ ${d.desc[2]}개 요소 선택됨</span></p>`;
  applyHL('comb-html', d.hl);
}
document.getElementById('comb-html').innerHTML = renderCombHTML();
applyHL('comb-html', combData.desc.hl);

// ══════ ③ ATTR ══════
const attrData = {
  exist: {
    desc: ['[required] — 속성 존재', '<strong>required 속성이 있는</strong> 요소를 선택합니다. 값과 상관없이 속성만 있으면 됩니다.', '2'],
    hl: [1, 3]
  },
  eq: {
    desc: ['[type="text"] — 값 일치', '<code>type</code> 속성값이 정확히 <code>"text"</code>인 요소를 선택합니다.', '1'],
    hl: [1]
  },
  start: {
    desc: ['[href^="https"] — 값으로 시작', '<code>href</code>가 <code>https</code>로 시작하는 링크만 선택합니다. 외부 링크 표시에 자주 씁니다.', '2'],
    hl: [6, 7]
  }
};

function renderAttrHTML() {
  return [
    el(0, tag('&lt;form&gt;'), 0),
    el(1, tag('&lt;input ') + attr('type') + '=' + val('"text"') + ' ' + attr('required') + tag('&gt;'), 1),
    el(1, tag('&lt;input ') + attr('type') + '=' + val('"email"') + tag('&gt;'), 2),
    el(1, tag('&lt;input ') + attr('type') + '=' + val('"password"') + ' ' + attr('required') + tag('&gt;'), 3),
    el(1, tag('&lt;button&gt;') + '제출' + tag('&lt;/button&gt;'), 4),
    el(0, tag('&lt;/form&gt;'), 5),
    el(0, tag('&lt;a ') + attr('href') + '=' + val('"https://google.com"') + tag('&gt;') + '외부 링크' + tag('&lt;/a&gt;'), 6),
    el(0, tag('&lt;a ') + attr('href') + '=' + val('"https://github.com"') + tag('&gt;') + '깃헙' + tag('&lt;/a&gt;'), 7),
    el(0, tag('&lt;a ') + attr('href') + '=' + val('"/about"') + tag('&gt;') + '내부 링크' + tag('&lt;/a&gt;'), 8),
  ].join('');
}

function attrSel(el, key) {
  document.querySelectorAll('#tab-attr .sel-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  const d = attrData[key];
  document.getElementById('attr-desc').innerHTML = `<h2><code>${d.desc[0]}</code></h2><p>${d.desc[1]}</p><p><span class="match-badge">✦ ${d.desc[2]}개 요소 선택됨</span></p>`;
  applyHL('attr-html', d.hl);
}
document.getElementById('attr-html').innerHTML = renderAttrHTML();
applyHL('attr-html', attrData.exist.hl);

// ══════ ④ PSEUDO CLASS ══════
const pseudoData = {
  hover: {
    desc: ':hover — 마우스 올림',
    text: '마우스 커서가 요소 위에 올라갔을 때 적용됩니다. 버튼, 링크, 카드 등 인터랙션 피드백에 가장 많이 씁니다.',
    demo: `<style>.demo-hover-btn { padding:12px 28px;background:#4cc9f0;color:#000;border:none;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s; } .demo-hover-btn:hover{background:#7ee8ff;transform:translateY(-2px);box-shadow:0 6px 20px #4cc9f044;}</style><button class="demo-hover-btn">버튼에 마우스를 올려보세요</button>`,
    code: `<span class="tag">.button</span>:hover {\n  background: <span class="val">#7ee8ff</span>;\n  transform: <span class="val">translateY(-2px)</span>;\n}`
  },
  focus: {
    desc: ':focus — 포커스 상태',
    text: '키보드 탭이나 클릭으로 요소가 포커스됐을 때 적용됩니다. 접근성(a11y)을 위해 반드시 스타일링해야 합니다.',
    demo: `<style>.demo-input{padding:10px 14px;background:#1a1a2e;border:2px solid #2d2d50;border-radius:8px;color:#e0e0f0;font-size:14px;width:260px;outline:none;transition:all .2s;}.demo-input:focus{border-color:#4cc9f0;box-shadow:0 0 0 3px #4cc9f033;}</style><input class="demo-input" placeholder="클릭해서 포커스해보세요">`,
    code: `<span class="tag">input</span>:focus {\n  border-color: <span class="val">#4cc9f0</span>;\n  box-shadow: <span class="val">0 0 0 3px #4cc9f033</span>;\n}`
  },
  active: {
    desc: ':active — 클릭 중',
    text: '마우스 버튼을 누르고 있는 순간에만 적용됩니다. 버튼을 눌렀을 때 "눌리는" 느낌을 줄 때 씁니다.',
    demo: `<style>.demo-active-btn{padding:12px 28px;background:#f3722c;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:all .1s;}.demo-active-btn:active{transform:scale(0.95);background:#c95a1e;box-shadow:inset 0 2px 6px #00000044;}</style><button class="demo-active-btn">꾹 눌러보세요</button>`,
    code: `<span class="tag">.button</span>:active {\n  transform: <span class="val">scale(0.95)</span>;\n  background: <span class="val">#c95a1e</span>;\n}`
  },
  first: {
    desc: ':first-child — 첫 번째 자식',
    text: '부모 요소의 첫 번째 자식인 요소를 선택합니다. 목록의 첫 항목에 다른 스타일을 줄 때 씁니다.',
    demo: `<style>.demo-list{list-style:none;padding:0;display:flex;flex-direction:column;gap:4px;}.demo-list li{padding:10px 14px;background:#1a1a2e;border-radius:6px;font-size:13px;color:#ccc;border-left:3px solid #2d2d50;}.demo-list li:first-child{border-left-color:#4cc9f0;color:#fff;font-weight:700;background:#1a2a3a;}</style><ul class="demo-list"><li>첫 번째 항목 ← :first-child 적용</li><li>두 번째 항목</li><li>세 번째 항목</li><li>네 번째 항목</li></ul>`,
    code: `<span class="tag">li</span>:first-child {\n  border-left-color: <span class="val">#4cc9f0</span>;\n  font-weight: <span class="val">700</span>;\n}`
  },
  last: {
    desc: ':last-child — 마지막 자식',
    text: '부모 요소의 마지막 자식인 요소를 선택합니다. 목록 마지막 항목의 border 제거 등에 자주 씁니다.',
    demo: `<style>.demo-list2{list-style:none;padding:0;}.demo-list2 li{padding:10px 14px;font-size:13px;color:#ccc;border-bottom:1px solid #2d2d50;}.demo-list2 li:last-child{border-bottom:none;color:#fff;font-weight:700;}</style><ul class="demo-list2"><li>첫 번째 항목</li><li>두 번째 항목</li><li>세 번째 항목</li><li>마지막 항목 ← :last-child 적용 (border 없음)</li></ul>`,
    code: `<span class="tag">li</span>:last-child {\n  border-bottom: <span class="val">none</span>;\n}`
  },
  nth: {
    desc: ':nth-child(n) — n번째 자식',
    text: '몇 번째 자식인지로 선택합니다. <code>2n</code>(짝수), <code>2n+1</code>(홀수), <code>3</code>(3번째) 등 다양하게 지정할 수 있습니다.',
    demo: `<style>.demo-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;}.demo-cell{padding:14px;background:#1a1a2e;border-radius:6px;text-align:center;font-size:12px;color:#888;border:1px solid #2d2d50;}.demo-cell:nth-child(2n){background:#1a2a1a;border-color:#90be6d;color:#90be6d;font-weight:700;}</style><div class="demo-grid"><div class="demo-cell">1</div><div class="demo-cell">2 ✓</div><div class="demo-cell">3</div><div class="demo-cell">4 ✓</div><div class="demo-cell">5</div><div class="demo-cell">6 ✓</div><div class="demo-cell">7</div><div class="demo-cell">8 ✓</div></div>`,
    code: `<span class="tag">div</span>:nth-child(<span class="val">2n</span>) {\n  <span class="cm">/* 짝수 번째 선택 */</span>\n  background: <span class="val">#1a2a1a</span>;\n  border-color: <span class="val">#90be6d</span>;\n}`
  }
};

function pseudoSel(elBtn, key) {
  document.querySelectorAll('#tab-pseudo .sel-item').forEach(i => i.classList.remove('active'));
  elBtn.classList.add('active');
  const d = pseudoData[key];
  document.getElementById('pseudo-desc').innerHTML = `<h2><code>${d.desc}</code></h2><p>${d.text}</p>`;
  document.getElementById('pseudo-demo').innerHTML = d.demo;
  document.getElementById('pseudo-code').innerHTML = `<div style="font-family:monospace;font-size:13px;line-height:1.9">${d.code}</div>`;
}
pseudoSel(document.querySelector('#tab-pseudo .sel-item'), 'hover');

// ══════ ⑤ PSEUDO ELEMENT ══════
const elemData = {
  before: {
    desc: '::before — 요소 앞에 삽입',
    text: '선택한 요소의 <strong>내부 맨 앞</strong>에 가상 요소를 만듭니다. 반드시 <code>content</code> 속성이 있어야 표시됩니다.',
    text2: 'HTML을 건드리지 않고 아이콘, 장식 등을 추가할 때 씁니다.',
    demo: `<style>
      .pe-list{list-style:none;padding:0;display:flex;flex-direction:column;gap:8px;}
      .pe-list li{padding:10px 14px;background:#1a1a2e;border-radius:6px;font-size:13px;color:#ccc;position:relative;padding-left:32px;}
      .pe-list li::before{content:'✓';position:absolute;left:10px;color:#90be6d;font-weight:700;}
    </style>
    <ul class="pe-list"><li>HTML 수정 없이 아이콘 추가</li><li>content 속성으로 내용 지정</li><li>position: absolute로 자유롭게 배치</li></ul>
    <p style="font-size:11px;color:#666;margin-top:12px;font-family:monospace">← ✓ 아이콘은 HTML에 없고 ::before로 생성됨</p>`,
    code: `<span class="tag">li</span>::before {\n  content: <span class="val">'✓'</span>;\n  position: <span class="val">absolute</span>;\n  left: <span class="val">10px</span>;\n  color: <span class="val">#90be6d</span>;\n}`
  },
  after: {
    desc: '::after — 요소 뒤에 삽입',
    text: '선택한 요소의 <strong>내부 맨 뒤</strong>에 가상 요소를 만듭니다. <code>content: ""</code>으로 비워두고 장식용으로 자주 씁니다.',
    text2: '버튼 밑줄 애니메이션, 배지 등에 활용됩니다.',
    demo: `<style>
      .pe-link{color:#4cc9f0;font-size:15px;font-weight:600;text-decoration:none;position:relative;display:inline-block;}
      .pe-link::after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:2px;background:#4cc9f0;transition:width .3s;}
      .pe-link:hover::after{width:100%;}
      .pe-badge{display:inline-block;font-size:14px;font-weight:700;padding:8px 16px;background:#1a1a2e;color:#e0e0f0;border-radius:6px;position:relative;margin-top:20px;}
      .pe-badge::after{content:'NEW';position:absolute;top:-8px;right:-8px;background:#f3722c;color:#fff;font-size:9px;font-weight:700;padding:2px 5px;border-radius:4px;}
    </style>
    <a class="pe-link" href="#">마우스를 올려 밑줄 애니메이션 확인</a><br>
    <span class="pe-badge">최신 강의</span>`,
    code: `<span class="tag">.link</span>::after {\n  content: <span class="val">''</span>;\n  position: <span class="val">absolute</span>;\n  bottom: <span class="val">-2px</span>; left: <span class="val">0</span>;\n  width: <span class="val">0</span>; height: <span class="val">2px</span>;\n  background: <span class="val">#4cc9f0</span>;\n  transition: <span class="val">width .3s</span>;\n}\n<span class="tag">.link</span>:hover::after {\n  width: <span class="val">100%</span>;\n}`
  }
};

function elemSel(elBtn, key) {
  document.querySelectorAll('#tab-element .sel-item').forEach(i => i.classList.remove('active'));
  elBtn.classList.add('active');
  const d = elemData[key];
  document.getElementById('elem-desc').innerHTML = `<h2><code>${d.desc}</code></h2><p>${d.text}</p><p>${d.text2}</p>`;
  document.getElementById('elem-demo').innerHTML = d.demo;
  document.getElementById('elem-code').innerHTML = `<div style="font-family:monospace;font-size:13px;line-height:1.9">${d.code}</div>`;
}
elemSel(document.querySelector('#tab-element .sel-item'), 'before');

// ══════ ⑥ SPECIFICITY ══════
const specState = { id:0, cls:0, hover:0, tag:0, p:0 };
const specLabels = { id:'#id', cls:'.class', hover:':hover', tag:'div', p:'p' };
const specCat = { id:'id', cls:'cls', hover:'cls', tag:'tag', p:'tag' };

function toggleSpec(row, key, pts) {
  row.classList.toggle('picked');
  specState[key] = row.classList.contains('picked') ? pts : 0;
  updateSpec();
}

function updateSpec() {
  const idScore = specState.id;
  const clsScore = specState.cls + specState.hover;
  const tagScore = specState.tag + specState.p;
  const total = idScore + clsScore + tagScore;

  document.getElementById('sc-id').textContent = idScore;
  document.getElementById('sc-cls').textContent = clsScore;
  document.getElementById('sc-tag').textContent = tagScore;
  document.getElementById('sc-total').textContent = total + '점';

  const parts = Object.entries(specState).filter(([,v])=>v>0).map(([k])=>specLabels[k]);
  document.getElementById('sc-combined').textContent = parts.length ? parts.join('') : '선택자를 클릭해서 조합해보세요';

  let note = '';
  if (total >= 100) note = `<strong style="color:#f3722c">#id 선택자</strong>가 포함되어 있어 매우 높은 명시도입니다. id는 꼭 필요할 때만 쓰세요.`;
  else if (total >= 10) note = `클래스/가상 클래스가 포함된 일반적인 명시도입니다.`;
  else if (total > 0) note = `태그 선택자만 사용 중입니다. 재사용을 위해 <strong style="color:#ddd">.class</strong>로 바꾸는 것이 좋습니다.`;
  document.getElementById('sc-note').innerHTML = note;
}
</script>
</body>
</html>